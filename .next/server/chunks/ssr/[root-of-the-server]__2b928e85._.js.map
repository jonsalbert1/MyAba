{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonsa/JSA/myaba/pages/dashboard.tsx"],"sourcesContent":["// pages/dashboard.tsx\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\n/** ----- Expected localStorage keys & shapes -----\r\n * Flashcards deck:  localStorage[\"flashcards:deck\"] => Array<{ term: string; def: string }>\r\n * SAFMEDS deck:     localStorage[\"safmeds:deck\"]    => Array<{ term: string; def: string }>\r\n * Quiz deck:        localStorage[\"quiz:deck\"]       => Array<any>\r\n *\r\n * SAFMEDS sessions: localStorage[\"safmeds:sessions\"] => Array<{\r\n *   startedAt: string;  // ISO\r\n *   endedAt: string;    // ISO\r\n *   correct: number;\r\n *   incorrect: number;\r\n *   durationSec?: number;\r\n * }>\r\n *\r\n * Quiz history:     localStorage[\"quiz:history\"] => Array<{\r\n *   timestamp: string;  // ISO\r\n *   correct: number;\r\n *   total: number;\r\n * }>\r\n * ------------------------------------------------- */\r\n\r\nfunction readLS<T>(key: string, fallback: T): T {\r\n  try {\r\n    const raw = localStorage.getItem(key);\r\n    if (!raw) return fallback;\r\n    return JSON.parse(raw) as T;\r\n  } catch {\r\n    return fallback;\r\n  }\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(0);\r\n  const [safmedsCount, setSafmedsCount] = useState<number>(0);\r\n  const [quizCount, setQuizCount] = useState<number>(0);\r\n\r\n  const [safmedsSessions, setSafmedsSessions] = useState<\r\n    Array<{ startedAt: string; endedAt: string; correct: number; incorrect: number; durationSec?: number }>\r\n  >([]);\r\n\r\n  const [quizHistory, setQuizHistory] = useState<\r\n    Array<{ timestamp: string; correct: number; total: number }>\r\n  >([]);\r\n\r\n  useEffect(() => {\r\n    const fc = readLS<Array<{ term: string; def: string }>>(\"flashcards:deck\", []);\r\n    setFlashcardsCount(Array.isArray(fc) ? fc.length : 0);\r\n\r\n    const sm = readLS<Array<{ term: string; def: string }>>(\"safmeds:deck\", []);\r\n    setSafmedsCount(Array.isArray(sm) ? sm.length : 0);\r\n\r\n    const qd = readLS<any[]>(\"quiz:deck\", []);\r\n    setQuizCount(Array.isArray(qd) ? qd.length : 0);\r\n\r\n    setSafmedsSessions(readLS(\"safmeds:sessions\", []));\r\n    setQuizHistory(readLS(\"quiz:history\", []));\r\n  }, []);\r\n\r\n  const last5Safmeds = useMemo(\r\n    () => [...safmedsSessions].slice(-5).reverse(),\r\n    [safmedsSessions]\r\n  );\r\n  const last10Quiz = useMemo(\r\n    () => [...quizHistory].slice(-10).reverse(),\r\n    [quizHistory]\r\n  );\r\n\r\n  const safmedsAvgAcc = useMemo(() => {\r\n    if (safmedsSessions.length === 0) return 0;\r\n    const totals = safmedsSessions.reduce(\r\n      (acc, s) => {\r\n        const t = s.correct + s.incorrect;\r\n        return { correct: acc.correct + s.correct, total: acc.total + t };\r\n      },\r\n      { correct: 0, total: 0 }\r\n    );\r\n    return totals.total ? Math.round((totals.correct / totals.total) * 100) : 0;\r\n  }, [safmedsSessions]);\r\n\r\n  const quizAvgAcc = useMemo(() => {\r\n    if (quizHistory.length === 0) return 0;\r\n    const totals = quizHistory.reduce(\r\n      (acc, q) => ({ correct: acc.correct + q.correct, total: acc.total + q.total }),\r\n      { correct: 0, total: 0 }\r\n    );\r\n    return totals.total ? Math.round((totals.correct / totals.total) * 100) : 0;\r\n  }, [quizHistory]);\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-gray-50\">\r\n      {/* Title */}\r\n      <section className=\"mx-auto max-w-5xl px-6 pt-6\">\r\n        <h1 className=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\r\n        <p className=\"mt-1 text-sm text-gray-600\">\r\n          Overview of decks and recent study activity.\r\n        </p>\r\n      </section>\r\n\r\n      <section className=\"mx-auto max-w-5xl px-6 py-6 grid gap-6\">\r\n        {/* Deck sizes */}\r\n        <div className=\"grid gap-4 sm:grid-cols-3\">\r\n          <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n            <p className=\"text-sm text-gray-500\">Flashcards</p>\r\n            <p className=\"mt-1 text-2xl font-bold\">{flashcardsCount}</p>\r\n          </div>\r\n          <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n            <p className=\"text-sm text-gray-500\">SAFMEDS</p>\r\n            <p className=\"mt-1 text-2xl font-bold\">{safmedsCount}</p>\r\n          </div>\r\n          <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n            <p className=\"text-sm text-gray-500\">Quiz</p>\r\n            <p className=\"mt-1 text-2xl font-bold\">{quizCount}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Averages */}\r\n        <div className=\"grid gap-4 sm:grid-cols-2\">\r\n          <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n            <p className=\"text-sm text-gray-500\">SAFMEDS Average Accuracy</p>\r\n            <div className=\"mt-2 h-2 w-full rounded-full bg-gray-200\">\r\n              <div className=\"h-full rounded-full bg-blue-600\" style={{ width: `${safmedsAvgAcc}%` }} />\r\n            </div>\r\n            <p className=\"mt-2 text-sm text-gray-700\">{safmedsAvgAcc}%</p>\r\n          </div>\r\n\r\n          <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n            <p className=\"text-sm text-gray-500\">Quiz Average Accuracy</p>\r\n            <div className=\"mt-2 h-2 w-full rounded-full bg-gray-200\">\r\n              <div className=\"h-full rounded-full bg-blue-600\" style={{ width: `${quizAvgAcc}%` }} />\r\n            </div>\r\n            <p className=\"mt-2 text-sm text-gray-700\">{quizAvgAcc}%</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent SAFMEDS sessions */}\r\n        <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Recent SAFMEDS Sessions</h2>\r\n            <p className=\"text-sm text-gray-500\">Showing {last5Safmeds.length || 0} most recent</p>\r\n          </div>\r\n\r\n          {last5Safmeds.length === 0 ? (\r\n            <p className=\"text-sm text-gray-600\">\r\n              No SAFMEDS sessions yet. After a timing, save a record to{\" \"}\r\n              <code className=\"rounded bg-gray-100 px-1 py-0.5\">localStorage[\"safmeds:sessions\"]</code>.\r\n            </p>\r\n          ) : (\r\n            <ul className=\"grid gap-3\">\r\n              {last5Safmeds.map((s, i) => {\r\n                const total = s.correct + s.incorrect;\r\n                const acc = total ? Math.round((s.correct / total) * 100) : 0;\r\n                const label = new Date(s.endedAt || s.startedAt).toLocaleString();\r\n                return (\r\n                  <li key={i} className=\"rounded-xl border px-4 py-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-800\">{label}</p>\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          {s.correct} correct / {total} total\r\n                          {typeof s.durationSec === \"number\" ? ` Â· ${s.durationSec}s` : \"\"}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"w-40\">\r\n                        <div className=\"h-2 w-full rounded-full bg-gray-200\">\r\n                          <div\r\n                            className=\"h-full rounded-full bg-blue-600\"\r\n                            style={{ width: `${acc}%` }}\r\n                          />\r\n                        </div>\r\n                        <p className=\"mt-1 text-right text-xs text-gray-600\">{acc}%</p>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        {/* Recent Quiz results */}\r\n        <div className=\"rounded-2xl bg-white p-5 shadow-sm\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Recent Quiz Results</h2>\r\n            <p className=\"text-sm text-gray-500\">Showing {last10Quiz.length || 0} most recent</p>\r\n          </div>\r\n\r\n          {last10Quiz.length === 0 ? (\r\n            <p className=\"text-sm text-gray-600\">\r\n              No quiz results yet. Save attempts to{\" \"}\r\n              <code className=\"rounded bg-gray-100 px-1 py-0.5\">localStorage[\"quiz:history\"]</code>.\r\n            </p>\r\n          ) : (\r\n            <ul className=\"grid gap-3\">\r\n              {last10Quiz.map((q, i) => {\r\n                const pct = q.total ? Math.round((q.correct / q.total) * 100) : 0;\r\n                const when = new Date(q.timestamp).toLocaleString();\r\n                return (\r\n                  <li key={i} className=\"rounded-xl border px-4 py-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-800\">{when}</p>\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          {q.correct} / {q.total}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"w-40\">\r\n                        <div className=\"h-2 w-full rounded-full bg-gray-200\">\r\n                          <div\r\n                            className=\"h-full rounded-full bg-blue-600\"\r\n                            style={{ width: `${pct}%` }}\r\n                          />\r\n                        </div>\r\n                        <p className=\"mt-1 text-right text-xs text-gray-600\">{pct}%</p>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}