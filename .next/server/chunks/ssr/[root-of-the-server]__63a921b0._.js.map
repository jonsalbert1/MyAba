{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonsa/JSA/myaba/lib/storage.ts"],"sourcesContent":["// lib/storage.ts\r\nexport type FlashCard = { term: string; def: string };\r\nexport type QuizItem = {\r\n  domain?: string;\r\n  question: string;\r\n  a: string;\r\n  b: string;\r\n  c: string;\r\n  d: string;\r\n  answer: \"A\" | \"B\" | \"C\" | \"D\";\r\n  rationale?: string;\r\n};\r\n\r\nconst safe = <T,>(key: string, fallback: T): T => {\r\n  if (typeof window === \"undefined\") return fallback;\r\n  try {\r\n    const raw = localStorage.getItem(key);\r\n    return raw ? (JSON.parse(raw) as T) : fallback;\r\n  } catch {\r\n    return fallback;\r\n  }\r\n};\r\n\r\nexport const loadFlashcards = () => safe<FlashCard[]>(\"safmeds:deck\", []);\r\nexport const saveFlashcards = (arr: FlashCard[]) =>\r\n  localStorage.setItem(\"safmeds:deck\", JSON.stringify(arr));\r\n\r\nexport const loadQuiz = () => safe<QuizItem[]>(\"quiz:deck\", []);\r\nexport const saveQuiz = (arr: QuizItem[]) =>\r\n  localStorage.setItem(\"quiz:deck\", JSON.stringify(arr));\r\n\r\nexport type SafMedsTrial = { timestamp: number; correct: number; errors: number; secs: number };\r\nexport const loadSafMedsTrials = () => safe<SafMedsTrial[]>(\"safmeds:trials\", []);\r\nexport const saveSafMedsTrials = (arr: SafMedsTrial[]) =>\r\n  localStorage.setItem(\"safmeds:trials\", JSON.stringify(arr));\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;;;;;;;;;AAajB,MAAM,OAAO,CAAK,KAAa;IAC7B,wCAAmC,OAAO;;;AAO5C;AAEO,MAAM,iBAAiB,IAAM,KAAkB,gBAAgB,EAAE;AACjE,MAAM,iBAAiB,CAAC,MAC7B,aAAa,OAAO,CAAC,gBAAgB,KAAK,SAAS,CAAC;AAE/C,MAAM,WAAW,IAAM,KAAiB,aAAa,EAAE;AACvD,MAAM,WAAW,CAAC,MACvB,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AAG5C,MAAM,oBAAoB,IAAM,KAAqB,kBAAkB,EAAE;AACzE,MAAM,oBAAoB,CAAC,MAChC,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonsa/JSA/myaba/pages/index.tsx"],"sourcesContent":["// pages/index.tsx\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { loadFlashcards, loadQuiz } from \"../lib/storage\";\r\n\r\nexport default function Home() {\r\n  const [fcCount, setFcCount] = useState<number>(0);\r\n  const [qCount, setQCount] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    async function loadCounts() {\r\n      // Try DB first\r\n      try {\r\n        const [fcRes, qRes] = await Promise.allSettled([\r\n          fetch(\"/api/flashcards/list?deckId=default\").then((r) => r.json()),\r\n          fetch(\"/api/quiz/list?deckId=default\").then((r) => r.json()),\r\n        ]);\r\n\r\n        if (!cancelled) {\r\n          if (fcRes.status === \"fulfilled\" && Array.isArray(fcRes.value.records)) {\r\n            setFcCount(fcRes.value.records.length);\r\n          } else {\r\n            setFcCount(loadFlashcards().length);\r\n          }\r\n\r\n          if (qRes.status === \"fulfilled\" && Array.isArray(qRes.value.records)) {\r\n            setQCount(qRes.value.records.length);\r\n          } else {\r\n            setQCount(loadQuiz().length);\r\n          }\r\n        }\r\n      } catch {\r\n        if (!cancelled) {\r\n          setFcCount(loadFlashcards().length);\r\n          setQCount(loadQuiz().length);\r\n        }\r\n      }\r\n    }\r\n\r\n    loadCounts();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  return (\r\n    <main style={{ maxWidth: 1000, margin: \"0 auto\", padding: \"24px 16px\" }}>\r\n      <section\r\n        style={{\r\n          background: \"white\",\r\n          borderRadius: 12,\r\n          padding: 24,\r\n          boxShadow: \"0 6px 16px rgba(0,0,0,0.08)\",\r\n        }}\r\n      >\r\n        <h1 style={{ fontSize: 28, marginBottom: 10 }}>Welcome back, Jon</h1>\r\n        <p style={{ color: \"#444\", marginBottom: 20 }}>\r\n          Jump into a deck, run a quick quiz, or time a SAFMEDS trial.\r\n        </p>\r\n\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fit,minmax(220px,1fr))\",\r\n            gap: 16,\r\n          }}\r\n        >\r\n          <Card title=\"Flashcards\" meta={`${fcCount} terms`} href=\"/flashcards\" />\r\n          <Card title=\"Quiz\" meta={`${qCount} items`} href=\"/quiz\" />\r\n          <Card title=\"SAFMEDS\" meta=\"Timed trials & graph\" href=\"/safmeds\" />\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction Card({ title, meta, href }: { title: string; meta: string; href: string }) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      style={{\r\n        display: \"block\",\r\n        textDecoration: \"none\",\r\n        color: \"inherit\",\r\n        border: \"1px solid #e6e6e6\",\r\n        borderRadius: 12,\r\n        padding: 18,\r\n        background: \"#fafafa\",\r\n      }}\r\n    >\r\n      <div style={{ fontSize: 18, fontWeight: 700 }}>{title}</div>\r\n      <div style={{ color: \"#666\", marginTop: 6 }}>{meta}</div>\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;AAClB;AACA;AACA;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAS;IAC/C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAS;IAE7C,IAAA,gHAAS,EAAC;QACR,IAAI,YAAY;QAEhB,eAAe;YACb,eAAe;YACf,IAAI;gBACF,MAAM,CAAC,OAAO,KAAK,GAAG,MAAM,QAAQ,UAAU,CAAC;oBAC7C,MAAM,uCAAuC,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI;oBAC/D,MAAM,iCAAiC,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI;iBAC1D;gBAED,IAAI,CAAC,WAAW;oBACd,IAAI,MAAM,MAAM,KAAK,eAAe,MAAM,OAAO,CAAC,MAAM,KAAK,CAAC,OAAO,GAAG;wBACtE,WAAW,MAAM,KAAK,CAAC,OAAO,CAAC,MAAM;oBACvC,OAAO;wBACL,WAAW,IAAA,yHAAc,IAAG,MAAM;oBACpC;oBAEA,IAAI,KAAK,MAAM,KAAK,eAAe,MAAM,OAAO,CAAC,KAAK,KAAK,CAAC,OAAO,GAAG;wBACpE,UAAU,KAAK,KAAK,CAAC,OAAO,CAAC,MAAM;oBACrC,OAAO;wBACL,UAAU,IAAA,mHAAQ,IAAG,MAAM;oBAC7B;gBACF;YACF,EAAE,OAAM;gBACN,IAAI,CAAC,WAAW;oBACd,WAAW,IAAA,yHAAc,IAAG,MAAM;oBAClC,UAAU,IAAA,mHAAQ,IAAG,MAAM;gBAC7B;YACF;QACF;QAEA;QACA,OAAO;YAAQ,YAAY;QAAM;IACnC,GAAG,EAAE;IAEL,qBACE,qKAAC;QAAK,OAAO;YAAE,UAAU;YAAM,QAAQ;YAAU,SAAS;QAAY;kBACpE,cAAA,qKAAC;YACC,OAAO;gBACL,YAAY;gBACZ,cAAc;gBACd,SAAS;gBACT,WAAW;YACb;;8BAEA,qKAAC;oBAAG,OAAO;wBAAE,UAAU;wBAAI,cAAc;oBAAG;8BAAG;;;;;;8BAC/C,qKAAC;oBAAE,OAAO;wBAAE,OAAO;wBAAQ,cAAc;oBAAG;8BAAG;;;;;;8BAI/C,qKAAC;oBACC,OAAO;wBACL,SAAS;wBACT,qBAAqB;wBACrB,KAAK;oBACP;;sCAEA,qKAAC;4BAAK,OAAM;4BAAa,MAAM,GAAG,QAAQ,MAAM,CAAC;4BAAE,MAAK;;;;;;sCACxD,qKAAC;4BAAK,OAAM;4BAAO,MAAM,GAAG,OAAO,MAAM,CAAC;4BAAE,MAAK;;;;;;sCACjD,qKAAC;4BAAK,OAAM;4BAAU,MAAK;4BAAuB,MAAK;;;;;;;;;;;;;;;;;;;;;;;AAKjE;AAEA,SAAS,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAiD;IAChF,qBACE,qKAAC,gIAAI;QACH,MAAM;QACN,OAAO;YACL,SAAS;YACT,gBAAgB;YAChB,OAAO;YACP,QAAQ;YACR,cAAc;YACd,SAAS;YACT,YAAY;QACd;;0BAEA,qKAAC;gBAAI,OAAO;oBAAE,UAAU;oBAAI,YAAY;gBAAI;0BAAI;;;;;;0BAChD,qKAAC;gBAAI,OAAO;oBAAE,OAAO;oBAAQ,WAAW;gBAAE;0BAAI;;;;;;;;;;;;AAGpD","debugId":null}}]
}