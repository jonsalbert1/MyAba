@import "tailwindcss";

/* ---------- Global design tokens ---------- */
:root {
  --container-px: clamp(12px, 3vw, 20px);
  --radius: 12px;
}

/* ---------- Base tweaks ---------- */
* { box-sizing: border-box; }
html { -webkit-text-size-adjust: 100%; }
img, svg, video { max-width: 100%; height: auto; }

/* Respect iOS safe areas on devices with a home indicator */
body { padding-bottom: env(safe-area-inset-bottom); }

/* Prevent iOS input zoom */
input, textarea, select { font-size: 16px; }

/* Your base theme */
body {
  @apply bg-gray-50 text-gray-900;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

/* Text selection + focus visibility */
::selection { background: rgba(37, 99, 235, 0.18); }
:focus-visible {
  outline: 2px solid theme(colors.blue.500);
  outline-offset: 2px;
  border-radius: 8px;
}

/* ---------- Responsive helpers ---------- */

/* Wrap tables so they don't blow layout on small screens */
.table-wrap { overflow-x: auto; }

/* Improve tap targets on mobile */
.touch-target { min-height: 44px; }

/* A generic page container */
.page {
  max-width: 1000px;
  margin: clamp(16px, 4vw, 40px) auto;
  padding: var(--container-px);
}

/* A centered card surface that scales on phones */
.card-surface {
  width: 100%;
  max-width: 560px;
  min-height: clamp(220px, 50vh, 420px);
  margin: 0 auto;
  border-radius: var(--radius);
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
  }
}

/* ---------- Components (tiny, reusable) ---------- */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-300 bg-white text-gray-900 shadow-sm hover:shadow transition;
  }
  .btn-primary {
    @apply border-transparent bg-blue-600 text-white hover:bg-blue-700;
  }
  .nav-link {
    @apply text-gray-700 hover:text-blue-700 transition;
  }
  .nav-link-active {
    @apply text-white bg-blue-600 rounded-lg px-2 py-1;
  }
  .kbd {
    @apply inline-block rounded-md border border-gray-300 bg-gray-50 px-1.5 py-0.5 text-xs font-mono text-gray-700;
  }
}

/* ---------- Flip-card utilities (WebKit-safe) ---------- */
@layer utilities {
  /* Make faces invisible when they rotate away (Safari needs the prefix) */
  .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }

  /* Keep children in 3D so the back face actually sits “behind” (Safari needs the prefix) */
  .preserve-3d { transform-style: preserve-3d; -webkit-transform-style: preserve-3d; }

  /* 180° Y rotation for the back face/container */
  .rotate-y-180 { transform: rotateY(180deg); }

  /* Tiny GPU hint to prevent black flicker on some devices */
  .gpu-hint { transform: translateZ(0); -webkit-transform: translateZ(0); }

  /* Optional: a convenient perspective utility if you don't want bracket syntax */
  .perspective-1200 { perspective: 1200px; }

  /* Smooth shadow hover for cards */
  .card-hover { @apply transition-shadow hover:shadow-lg; }
}

/* ---------- Light/Dark (optional) ---------- */
@media (prefers-color-scheme: dark) {
  .dark\:card { background: #0b1220; color: #e5e7eb; }
}
